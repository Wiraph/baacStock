<!-- หน้าค้นหา -->
<div *ngIf="activeView === 'search'">
  <app-search-edit (statusView)="onHandle($event)"></app-search-edit>
</div>

<div *ngIf="activeView === 'block'">
  <div class="m-4 rounded-md shadow-md bg-white">
    <p class="text-center py-3 rounded-t-md bg-green-400 text-xl font-semibold text-white">รายการใบหุ้น :
      บล็อค</p>
    <div *ngIf="stkBlockList.length <= 0" class="py-5">
      <p class="text-center text-orange-500 text-2xl">ไม่พบข้อมูลใบหุ้นที่ Active (สถานะปกติ)</p>
    </div>
    <div *ngIf="stkBlockList.length != 0">
      <div class="text-center py-4 gap-4">
        <div class="flex justify-center gap-4">
          <p>บัตรแสดงตนเลขที่ : {{ customerData.cusiD }}</p>
          <p>สถานะ : {{ customerData.staDesc }} </p>
        </div>
        <p>ชื่อ - นามสกุล : {{ customerData.title }}{{ customerData.fname }} {{ customerData.lname }}</p>
      </div>
      <div class="p-4">
        <table class="table-auto w-full border border-gray-300 rounded-lg shadow-sm">
          <thead>
            <tr class="bg-blue-600 text-white text-sm uppercase tracking-wider">
              <th class="px-4 py-2 text-center">ลำดับ</th>
              <th class="px-4 py-2 text-left">สาขา</th>
              <th class="px-4 py-2 text-left">หมายเลขใบหุ้น</th>
              <th class="px-4 py-2 text-left">หมายเลขใบหุ้นเดิม</th>
              <th class="px-4 py-2 text-left">หมายเลขหุ้น</th>
              <th class="px-4 py-2 text-right">จำนวนหุ้น</th>
              <th class="px-4 py-2 text-right">มูลค่าหุ้น</th>
              <th class="px-4 py-2 text-center">สถานะ</th>
              <th class="px-4 py-2 text-center">วันเวลาที่ทำรายการ</th>
              <th class="px-4 py-2 text-center">ออกใบหุ้นใหม่</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-200" *ngFor="let item of stkBlockList; ">
            <tr class="hover:bg-gray-50 transition">
              <td class="px-4 py-2 text-center">{{ item.roWi }}</td>
              <td class="px-4 py-2">{{ item.brCode }}</td>
              <td class="px-4 py-2">{{ item.stkNOTE }}</td>
              <td class="px-4 py-2">{{ item.stkNOTEo }}</td>
              <td class="px-4 py-2">{{ item.stkNOStart }} - {{ item.stkNOStop }}</td>
              <td class="px-4 py-2 text-right">{{ item.stkUNiT | number:'1.0-0' }}</td>
              <td class="px-4 py-2 text-right">{{ item.stkVALUE | number:'1.0-0'}}</td>
              <td class="px-4 py-2 text-center">{{ item.stDESC }}</td>
              <td class="px-4 py-2 text-center">{{ formatThaiDateTime(item.datetimeup) || '-' }}</td>
              <td class="px-4 py-2 text-center">
                <button *ngIf="item.stCODEs == 'S000'"
                  class="px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600"
                  (click)="onBlock(item.stkNOTE, item.stCODEs)">บล็อค
                </button>
                <button *ngIf="item.stCODEs == 'S008'"
                  class="px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600"
                  (click)="onBlock(item.stkNOTE, item.stCODEs)">ปลดบล็อค
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<!-- Loading Overlay -->
<div *ngIf="loading" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg p-6 flex items-center space-x-3">
    <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-red-600"></div>
    <span class="text-gray-700">กำลังดำเนินการ...</span>
  </div>
</div>