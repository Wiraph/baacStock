<div class="max-w-4xl mx-auto p-6 bg-white rounded shadow">
  <h2 class="text-xl font-bold mb-4 text-center">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>

  <p class="mb-2">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>

  <form #searchForm="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4" (ngSubmit)="onSearch()">
    <div>
      <label class="block text-sm font-medium text-gray-700">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô</label>
      <input type="text" [(ngModel)]="criteria.cusId" name="cusId"
        class="w-full px-3 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" />
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ö‡∏´‡∏∏‡πâ‡∏ô</label>
      <input type="text" [(ngModel)]="criteria.stockId" name="stockId"
        class="w-full px-3 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" />
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700">‡∏ä‡∏∑‡πà‡∏≠</label>
      <input type="text" [(ngModel)]="criteria.fname" name="fname"
        class="w-full px-3 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" />
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
      <input type="text" [(ngModel)]="criteria.lname" name="lname"
        class="w-full px-3 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" />
    </div>

    <div class="col-span-1 md:col-span-2 flex justify-end space-x-2 mt-2">
      <button type="submit"
        class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700">
        üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
      </button>
      <button type="button" (click)="onReset()"
        class="text-white bg-gray-300 hover:bg-gray-600 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-gray-500 dark:hover:bg-gray-400">
        ‚ôªÔ∏è ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
      </button>
    </div>
  </form>

  <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Loading -->
  <div *ngIf="loading" class="text-blue-600 font-medium mt-2">
    üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...
  </div>


  <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå -->
  <div *ngIf="results.length > 0" class="overflow-x-auto mt-4">
    <h3 class="text-md font-semibold mb-2">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏û‡∏ö: {{ results.length }} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>

    <table class="min-w-full border border-gray-300 text-sm text-gray-700">
      <thead class="bg-gray-100">
        <tr>
          <th class="border px-4 py-2 text-left">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
          <th class="border px-4 py-2 text-left">‡∏™‡∏≤‡∏Ç‡∏≤</th>
          <th class="border px-4 py-2 text-left">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô</th>
          <th class="border px-4 py-2 text-left">‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
          <th class="border px-4 py-2 text-left">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
          <th class="border px-4 py-2 text-left">‡πÉ‡∏ö‡∏´‡∏∏‡πâ‡∏ô</th>
          <th class="border px-4 py-2 text-left">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of results; let i = index">
          <td class="border px-4 py-1">{{ i + 1 }}</td>
          <td class="border px-4 py-1">{{ r.brCus }}</td>
          <td class="border px-4 py-1">{{ r.cusiD }}</td>
          <td class="border px-4 py-1">{{ r.fullName }}</td>
          <td class="border px-4 py-1">{{ r.statusDesc || '-' }}</td>
          <td class="border px-4 py-1">
            <ul class="list-disc list-inside">
              <li *ngFor="let stk of r.stockNotes">{{ stk }}</li>
            </ul>
          </td>
          <td class="border px-4 py-1 text-center">
            <button (click)="onEdit(r)" class="text-blue-600 hover:text-blue-800">üìù</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå -->
  <div *ngIf="results.length === 0 && searched" class="text-red-500 mt-2">
    ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
  </div>

  <!-- ‚úÖ Modal -->
  <div *ngIf="showModal" class="fixed inset-0 flex items-center justify-center bg-gray-500 z-50" style="background-color: rgba(128, 128, 128, 0.7);">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-6">
      <h2 class="text-xl font-bold mb-4">üõ†Ô∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>

      <div class="mb-3">
        <label class="block text-sm font-medium text-gray-700">‡∏ä‡∏∑‡πà‡∏≠</label>
        <input [(ngModel)]="editingItem.fname" class="w-full border px-3 py-2 rounded" />
      </div>

      <div class="mb-3">
        <label class="block text-sm font-medium text-gray-700">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
        <input [(ngModel)]="editingItem.lname" class="w-full border px-3 py-2 rounded" />
      </div>

      <div class="flex justify-end space-x-2">
        <button (click)="onCloseModal()" class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500">‚ùå
          ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button (click)="onSaveEdit()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">üíæ
          ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
      </div>
    </div>
  </div>
</div>