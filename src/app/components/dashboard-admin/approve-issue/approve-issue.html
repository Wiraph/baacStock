<div *ngIf="activeView == 'table'" class="m-2 bg-white rounded-md">
    <div class="py-2 bg-green-500 rounded-t-md">
        <p class="text-center text-white">‡∏™‡∏≤‡∏Ç‡∏≤{{ brName }} : ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏≠‡∏≠‡∏Å‡πÉ‡∏ö‡∏´‡∏∏‡πâ‡∏ô</p>
    </div>

    <div class="overflow-x-auto mt-4 p-4" *ngIf="issueList != ''; else nodata">
        <table class="min-w-full bg-white shadow-md rounded-lg overflow-hidden">
            <thead class="bg-green-400 text-white">
                <tr>
                    <th class="py-3 px-4 text-center text-sm">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
                    <th class="py-3 px-4 text-center text-sm">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô</th>
                    <th class="py-3 px-4 text-center text-sm">‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                    <th class="py-3 px-4 text-center text-sm">‡∏™‡∏≤‡∏Ç‡∏≤</th>
                    <th class="py-3 px-4 text-center text-sm">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÉ‡∏ö‡∏´‡∏∏‡πâ‡∏ô</th>
                    <th class="py-3 px-4 text-center text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô</th>
                    <th class="py-3 px-4 text-center text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th>
                    <th class="py-3 px-4 text-center text-sm">‡πÅ‡∏™‡∏î‡∏á</th>
                </tr>
            </thead>
            <tbody class="text-gray-700">
                <tr *ngFor="let item of issueList" class="even:bg-gray-100 hover:bg-gray-200">
                    <td class="py-2 px-4 text-center">{{ item.rowNumber }}</td>
                    <td class="py-2 px-4 text-center">{{item.customerId}}</td>
                    <td class="py-2 px-4 text-center">{{item.customerFirstName}}</td>
                    <td class="py-2 px-4 text-center">{{item.branchName}}</td>
                    <td class="py-2 px-4 text-center">{{item.stockNote}}</td>
                    <td class="py-2 px-4 text-center">{{item.stockUnit}}</td>
                    <td class="py-2 px-4 text-center">{{item.stockValue | number:'1.0-0'}}</td>
                    <td class="py-2 px-4 text-center">
                        <button class="cursor-pointer" (click)="showPopup(item.stockNote, item.statusCode)">üìù</button>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="flex justify-between items-center mt-4 px-2 text-sm">
        <button (click)="prevPage()" [disabled]="pageNumber <= 1"
          class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed">
          ‚óÄ ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô
        </button>
        <span class="text-gray-700">‡∏´‡∏ô‡πâ‡∏≤ {{ pageNumber }}</span>
        <button (click)="nextPage()" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded">
          ‡∏´‡∏ô‡πâ‡∏≤‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ñ∂
        </button>
      </div>
    </div>

    <ng-template #nodata>
        <div class="py-4">
            <p class="text-center text-orange-500 text-xl">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</p>
        </div>
    </ng-template>

</div>

<!-- ‚úÖ Loading Overlay ‡πÅ‡∏ö‡∏ö‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ + ‡∏°‡∏≠‡∏á‡∏ó‡∏∞‡∏•‡∏∏ + ‡πÄ‡∏ö‡∏•‡∏≠ -->
<div *ngIf="loading"
  class="fixed inset-0 z-50 flex items-center justify-center bg-gray-100 bg-opacity-40 backdrop-blur-sm"
  style="background-color: rgba(128, 128, 128, 0.7);">
  <div class="text-center">
    <svg class="animate-spin h-10 w-10 text-blue-600 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none"
      viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" />
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" />
    </svg>
    <p class="text-lg text-white font-medium">üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</p>
  </div>
</div>