<ng-container *ngIf="!loading">
    <div class="p-6 bg-white rounded shadow text-sm text-gray-800">
        <h2 class="text-2xl font-bold mb-4">üõ†Ô∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡∏´‡∏ô‡πâ‡∏≤ commonStock)</h2>

        <p class="font-semibold">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</p>
        <ul class="mb-7">
            <li>‚ö´‡∏Å‡∏£‡∏≠‡∏ö‡∏™‡∏µ‡∏î‡∏≥‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ</li>
            <li>üîµ‡∏Å‡∏£‡∏≠‡∏ö‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô<span class="font-bold">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ</span></li>
        </ul>

        <!-- üîπ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ -->
        <div class="flex flex-row gap-4 mb-6">
            <div class="mb-4">
                <label for="" class="block mb-1 text-sm">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:</label>
                <select [(ngModel)]="editingItem.cusCode" class="border rounded px-3 py-2">
                    <option *ngFor="let type of custypeList" [value]="type.cusCode">
                        {{ type.cusCode }} : {{ type.cusDesc }}
                    </option>
                </select>
            </div>

            <div class="mb-4 block">
                <label for="" class="text-sm mr-2 whitespace-nowrap">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô:</label>
                <p class="text-blue-600 font-medium text-xl">
                    ({{ editingItem.cusCodeg }}) {{ editingItem.custypeDesc }}
                </p>
            </div>
        </div>

        <div class="flex gap-4">
            <div class="mb-4 flex-1">
                <label for="" class="block mb-1 text-sm">‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô:</label>
                <select [(ngModel)]="editingItem.docType" class="w-full border rounded px-3 py-2">
                    <option *ngFor="let t of doctypeList" [value]="t.docType">{{ t.docDesc }}</option>
                </select>
            </div>
            <div class="mb-4 flex-1">
                <label for="" class="block mb-1 text-sm">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà:</label>
                <input [(ngModel)]="editingItem.cusiD" type="text" class="w-full border px-3 py-2 rounded">
            </div>
            <div class="mb-4 flex-1">
                <label for="" class="block mb-1 text-sm">Ref:</label>
                <input [(ngModel)]="editingItem.brCus" type="text"
                    class="w-full border px-3 py-2 rounded border-blue-600" disabled>
            </div>
        </div>

        <div class="flex gap-4">
            <div class="mb-4 flex-1">
                <label for="" class="block mb-1 text-sm">‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏∑‡πà‡∏≠:</label>
                <select [(ngModel)]="editingItem.title" class="w-full border rounded px-3 py-2">
                    <option *ngFor="let tl of titleList" [value]="tl.titleCode">{{ tl.titleDesc }}</option>
                </select>
            </div>
            <div class="mb-4 flex-1">
                <label for="" class="block mb-1 text-sm">‡∏ú‡∏π‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏†‡∏≤‡∏©‡∏µ:</label>
                <input [(ngModel)]="editingItem.cusTax" type="text" class="w-full border px-3 py-2 rounded">
            </div>
            <div class="mb-4 flex-1">
                <label for="" class="block mb-1 text-sm">‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô:</label>
                <input [(ngModel)]="editingItem.stockUnitTotal" type="text"
                    class="w-full border px-3 py-2 rounded border-blue-600" disabled>
            </div>
        </div>

        <div class="mb-4 flex-1">
            <label for="" class="block mb-1 text-sm">‡∏ä‡∏∑‡πà‡∏≠:</label>
            <input [(ngModel)]="editingItem.cusFname" type="text" class="w-full border px-3 py-2 rounded">
        </div>
        <div class="mb-4 flex-1">
            <label for="" class="block mb-1 text-sm">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
            <input [(ngModel)]="editingItem.cusLname" type="text" class="w-full border px-3 py-2 rounded">
        </div>

        <div *ngIf="homeAddress" class="mt-7">
            <h2 class="text-center">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≤‡∏°‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô</h2>
            <div class="flex gap-4">
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà:</label>
                    <input [(ngModel)]="homeAddress.houseno" type="text" class="w-full border px-3 py-2 rounded">
                </div>
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡∏ã‡∏≠‡∏¢:</label>
                    <input [(ngModel)]="homeAddress.trogSoi" type="text" class="w-full border px-3 py-2 rounded">
                </div>
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡∏ñ‡∏ô‡∏ô:</label>
                    <input [(ngModel)]="homeAddress.road" type="text" class="w-full border px-3 py-2 rounded">
                </div>
            </div>

            <div class="flex gap-4">
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</label>
                        class="w-full border rounded px-3 py-2">
                        <option *ngFor="let pv of provinceList" [value]="pv.prvCode">{{ pv.prvName }}</option>
                </div>
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡∏≠‡∏≥‡πÄ‡∏†‡∏≠:</label>
                    <select [(ngModel)]="homeAddress.ampCode"
                        class="w-full border rounded px-3 py-2">
                        <option *ngFor="let amp of homeAumphors" [value]="amp.ampCode">{{ amp.ampName }}</option>
                    </select>
                </div>
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡∏ï‡∏≥‡∏ö‡∏•:</label>
                    <select [(ngModel)]="homeAddress.tmbCode" (change)="updateHomeZipcode()"
                        class="w-full border rounded px-3 py-2">
                        <option *ngFor="let tmb of homeTumbons" [value]="tmb.tmbCode">{{ tmb.tmbName }}</option>
                    </select>
                </div>
            </div>

            <div class="flex gap-4">
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå:</label>
                    <input [(ngModel)]="homeAddress.zipcode" type="text"
                        class="w-full border px-3 py-2 rounded border-blue-600" disabled>
                </div>
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠:</label>
                    <input [(ngModel)]="homeAddress.phone" type="text" class="w-full border px-3 py-2 rounded">
                </div>
            </div>
        </div>

        <div *ngIf="currentAddress" class="mt-7">
            <h2 class="text-center">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h2>
            <div class="flex gap-4">
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà:</label>
                    <input [(ngModel)]="currentAddress.houseno" type="text" class="w-full border px-3 py-2 rounded">
                </div>
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡∏ã‡∏≠‡∏¢:</label>
                    <input [(ngModel)]="currentAddress.trogSoi" type="text" class="w-full border px-3 py-2 rounded">
                </div>
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡∏ñ‡∏ô‡∏ô:</label>
                    <input [(ngModel)]="currentAddress.road" type="text" class="w-full border px-3 py-2 rounded">
                </div>
            </div>

            <div class="flex gap-4">
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</label>
                        class="w-full border rounded px-3 py-2">
                        <option *ngFor="let pv of provinceList" [value]="pv.prvCode">{{ pv.prvName }}</option>
                </div>
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡∏≠‡∏≥‡πÄ‡∏†‡∏≠:</label>
                    <select [(ngModel)]="currentAddress.ampCode"
                        class="w-full border rounded px-3 py-2">
                        <option *ngFor="let amp of currentAumphors" [value]="amp.ampCode">{{ amp.ampName }}</option>
                    </select>
                </div>
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡∏ï‡∏≥‡∏ö‡∏•:</label>
                    <select [(ngModel)]="currentAddress.tmbCode" (change)="updateCurrentZipcode()"
                        class="w-full border rounded px-3 py-2">
                        <option *ngFor="let tmb of currentTumbons" [value]="tmb.tmbCode">{{ tmb.tmbName }}</option>
                    </select>
                </div>
            </div>

            <div class="flex gap-4">
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå:</label>
                    <input [(ngModel)]="currentAddress.zipcode" type="text"
                        class="w-full border px-3 py-2 rounded border-blue-600" disabled>
                </div>
                <div class="mb-4 flex-1">
                    <label for="" class="block mb-1 text-sm">‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠:</label>
                    <input [(ngModel)]="currentAddress.phone" type="text" class="w-full border px-3 py-2 rounded">
                </div>
            </div>

            <div class="mb-4 flex-1">
                <label for="" class="block mb-1 text-sm">‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</label>
                <input [(ngModel)]="currentAddress.addr1" type="text"
                    class="w-full text-gray-400 border px-3 py-2 rounded border-blue-600" disabled>
            </div>
            <div class="mb-4 flex-1">
                <label for="" class="block mb-1 text-sm">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà 2:</label>
                <input [(ngModel)]="currentAddress.addr2" type="text"
                    class="w-full text-gray-400 border px-3 py-2 rounded border-blue-600" disabled>
            </div>
        </div>

        <div class="flex justify-end space-x-2 mt-6">
     
            <button (click)="onSaveEdit()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">üíæ
                ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
        </div>
    </div>

    <!-- ‚úÖ Loading Overlay ‡πÅ‡∏ö‡∏ö‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ + ‡∏°‡∏≠‡∏á‡∏ó‡∏∞‡∏•‡∏∏ + ‡πÄ‡∏ö‡∏•‡∏≠ -->

</ng-container>

<!-- Loading Overlay -->
<div *ngIf="loading"
    class="fixed inset-0 z-50 flex items-center justify-center bg-gray-100 bg-opacity-40 backdrop-blur-sm"
    style="background-color: rgba(128, 128, 128, 0.7);">
    <div class="text-center">
        <svg class="animate-spin h-10 w-10 text-blue-600 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none"
            viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" />
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" />
        </svg>
        <p class="text-lg text-white font-medium">üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</p>
    </div>
</div>