<div *ngIf="activeView == 'search'">
  <app-search-edit [InputtransferShare]="internalViewName" (viewStock)="onViewStock($event)"
    (transferStock)="onTransferStockSelected($event)"></app-search-edit>
</div>

<div *ngIf="activeView === 'stock-transfer'" class="p-4">
  <div *ngIf="selectedcustomer" class="w-full bg-white rounded-xl shadow-md">
    <div class="flex justify-start px-4 py-2">
      <button (click)="goBack()" class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400">
        ‚Üê ‡∏Å‡∏•‡∏±‡∏ö
      </button>
    </div>

    <!-- ‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á -->
    <div class="bg-green-500 rounded-t-xl text-center py-3">
      <p class="text-xl text-white font-bold">‡πÇ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡∏∑‡∏≠</p>
    </div>
    <div class="w-full flex flex-col items-center justify-center text-center space-y-2 py-4">
      <div class="flex gap-4">
        <div class="flex items-center gap-2">
          <label>‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà :</label>
          <p>{{ selectedcustomer.cusId }}</p>
        </div>
        <div class="flex items-center gap-2">
          <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ :</label>
          <p>{{ selectedcustomer.status }}</p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <label>‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• :</label>
        <p>{{ selectedcustomer.fname }} {{ selectedcustomer.lname }}</p>
      </div>
    </div>
    <div class="p-4">
      <table class="table-auto w-full border border-collapse shadow-md">
        <thead class="bg-green-100 text-gray-800">
          <tr>
            <th class="border px-3 py-2 text-center">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
            <th class="border px-3 py-2 text-center">‡∏™‡∏≤‡∏Ç‡∏≤</th>
            <th class="border px-3 py-2 text-center">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÉ‡∏ö‡∏´‡∏∏‡πâ‡∏ô</th>
            <th class="border px-3 py-2 text-center">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÉ‡∏ö‡∏´‡∏∏‡πâ‡∏ô‡πÄ‡∏î‡∏¥‡∏°</th>
            <th class="border px-3 py-2 text-center">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏∏‡πâ‡∏ô</th>
            <th class="border px-3 py-2 text-center">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô</th>
            <th class="border px-3 py-2 text-center">‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏´‡∏∏‡πâ‡∏ô</th>
            <th class="border px-3 py-2 text-center">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
            <th class="border px-3 py-2 text-center">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
            <th class="border px-3 py-2 text-center">‡πÇ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡∏∑‡∏≠</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let stock of selectedcustomer.stock; let i = index" class="hover:bg-gray-100">
            <td class="border px-3 py-2 text-center">{{ i + 1 }}</td>
            <td class="border px-3 py-2 text-center">{{ stock.brDesc }}</td>
            <td class="border px-3 py-2 text-center">{{ stock.stkNote }}</td>
            <td class="border px-3 py-2 text-center">{{ stock.stkNoteo || "-" }}</td>
            <td class="border px-3 py-2 text-center">{{ stock.stkStart }} - {{ stock.stkEnd }}</td>
            <td class="border px-3 py-2 text-center">{{ stock.unit }}</td>
            <td class="border px-3 py-2 text-center">{{ stock.unitValue | number:'1.0-2' }}</td>
            <td class="border px-3 py-2 text-center">{{ stock.stkDesc }}</td>
            <td class="border px-3 py-2 text-center">{{ formatThaiDateTime(stock.stkDateInput) }}</td>
            <td class="border px-3 py-2 text-center">
              <button
                (click)="stock.stkStatus === 'A003' ? showDetail(stock.stkNote) : onSetTransfer(stock, selectedcustomer)"
                class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">
                ‡πÇ‡∏≠‡∏ô
              </button>

            </td>
          </tr>
        </tbody>
      </table>
    </div>


  </div>
</div>

<div *ngIf="activeView === 'transfer'" class="p-4">
  <div *ngIf="selectCusTransfer" class="w-full bg-white rounded-xl shadow-md">
    <!-- ‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á -->
    <div class="bg-green-500 rounded-t-xl text-center py-3">
      <p class="text-xl text-white font-bold">‡πÇ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡∏∑‡∏≠</p>
    </div>

    <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ -->
    <div class="flex flex-col w-full p-6 gap-6">

      <!-- ‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 1 -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-gray-700 font-medium">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô:</label>
          <p class="text-gray-800 mt-1">{{ selectCusTransfer.cusId }}</p>
        </div>
        <div *ngIf="selectStockTransfer">
          <label class="block text-gray-700 font-medium">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ö‡∏´‡∏∏‡πâ‡∏ô:</label>
          <p class="text-gray-800 mt-1">{{ selectStockTransfer.stkNote }}</p>
        </div>
        <div *ngIf="selectStockTransfer">
          <label class="block text-gray-700 font-medium">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏∏‡πâ‡∏ô:</label>
          <p class="text-gray-800 mt-1">{{ selectStockTransfer.stkStart }} - {{ selectStockTransfer.stkEnd }}</p>
        </div>
      </div>

      <!-- ‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 2 -->
      <div *ngIf="selectCusTransfer" class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-gray-700 font-medium">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
          <p class="text-gray-800 mt-1">{{ selectCusTransfer.fname }} {{ selectCusTransfer.lname }}</p>
        </div>
        <div>
          <label class="block text-gray-700 font-medium">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</label>
          <p class="text-gray-800 mt-1">{{ selectCusTransfer.status }}</p>
        </div>
        <div *ngIf="selectStockTransfer">
          <label class="block text-gray-700 font-medium">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô:</label>
          <p class="text-gray-800 mt-1">{{ selectStockTransfer.unit }}</p>
        </div>
      </div>

      <!-- ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡∏∑‡∏≠ -->
      <div class="text-center text-gray-600 text-lg font-medium flex justify-center items-center gap-2">
        <span>‡∏ú‡∏π‡πâ‡πÇ‡∏≠‡∏ô ‚¨ÜÔ∏è</span>
        <span class="text-xl">‚áÑ</span>
        <span>‚¨áÔ∏è ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô</span>
      </div>

      <!-- ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• -->
      <div class="mb-6 flex flex-col sm:flex-row sm:items-center sm:gap-4 justify-center">
        <label class="mb-2 sm:mb-0 font-medium text-gray-700 whitespace-nowrap">
          ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡∏´‡∏∏‡πâ‡∏ô
        </label>
        <select [(ngModel)]="globalRemCode"
          class="w-full sm:w-6/12 px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-150 ease-in-out bg-white text-gray-700">
          <option value="">-- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• --</option>
          <option *ngFor="let rem of remcodeList" [value]="rem.remCode">
            {{ rem.remDesc }}
          </option>
        </select>
      </div>




      <!-- ‚úÖ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß -->
      <div *ngIf="transferList.length > 0" class="border border-gray-300 bg-gray-50 rounded p-4 mb-4">
        <p class="font-semibold mb-2 text-gray-800">üìù ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß:</p>

        <ul class="space-y-2 text-sm text-gray-700">
          <li *ngFor="let person of transferList; index as i" class="flex justify-between items-center">
            <div>
              {{ i + 1 }}. {{ person.fullName || '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏ä‡∏∑‡πà‡∏≠' }} | {{ person.cid }} | {{ person.shareAmount }} ‡∏´‡∏∏‡πâ‡∏ô
            </div>
            <button (click)="removeTransfer(i)" class="text-red-600 hover:text-red-800 text-xs underline">‡∏•‡∏ö</button>
          </li>
        </ul>
      </div>
      <!-- ‡∏õ‡πâ‡∏≠‡∏ô‡∏ö‡∏±‡∏ï‡∏£ -->
      <!-- ‚úÖ ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏≠‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö -->
      <div class="flex justify-center mt-4">
        <div *ngIf="isEnteringNewPerson" class="w-6/12 border border-gray-200 rounded-xl p-6 bg-gray-50 shadow-sm">
          <label class="block mb-2 text-sm font-semibold text-gray-700">
            ‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô):
          </label>
          <div class="flex items-center gap-3">
            <input [(ngModel)]="tempCID" type="text"
              class="flex-1 px-4 py-2 rounded-lg border border-gray-200 bg-white focus:outline-none focus:ring-1 focus:ring-blue-300 shadow-sm"
              placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£" />
            <button (click)="fetchReceiverInfo()"
              class="inline-flex items-center justify-center px-3 py-2 rounded-lg bg-green-500 text-white hover:bg-green-600 transition-all shadow"
              title="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô">
              <span class="text-xl leading-none">‚ûï</span>
            </button>
          </div>
        </div>
      </div>

      <div *ngIf="selectedTransfer" class="mt-6 p-6 bg-white rounded-xl shadow-lg ring-1 ring-gray-200">
        <!-- ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ -->
        <div class="text-center mb-4 text-lg font-semibold text-gray-800">
          üë§ ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô
        </div>
        <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div>
            <label class="block text-sm text-gray-700">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô:</label>
            <input [(ngModel)]="selectedTransfer.cid" type="text"
              class="w-full outline-2 outline-blue-400 text-gray-400 bg-gray-100 rounded px-3 py-2" disabled>
          </div>
          <div>
            <label class="block text-sm text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô:</label>
            <input [(ngModel)]="selectedTransfer.shareAmount" type="number" min="0"
              class="w-full outline-2 outline-green-400 rounded px-3 py-2">
          </div>
          <div class="md:col-span-2">
            <label class="block text-sm text-gray-700">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
            <p class="text-gray-800">{{ selectedTransfer.fullName }}</p>
          </div>
        </div>
        <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏• -->
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
          <label class="block text-gray-700 font-medium mb-2">üí∞ ‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•:</label>
          <div class="flex flex-col gap-3">
            <!-- ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å -->
            <label class="flex items-center gap-2">
              <input type="radio" [(ngModel)]="selectedTransfer.payType" value="001">
              <span>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å</span>
            </label>

            <div *ngIf="selectedTransfer.payType === '001'" class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm text-gray-600 mb-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</label>
                <select [(ngModel)]="selectedTransfer.accType"
                  class="w-full outline-2 outline-blue-400 rounded px-3 py-2 bg-gray-100 text-gray-500" disabled>
                  <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ç‡∏ä‡∏µ --</option>
                  <option *ngFor="let a of accTypes" [value]="a.accType">{{ a.accDesc }}</option>
                </select>
              </div>
              <div>
                <label class="block text-sm text-gray-600 mb-1">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</label>
                <input [(ngModel)]="selectedTransfer.accNo"
                  class="w-full outline-2 outline-green-400 rounded px-3 py-2 bg-gray-100">
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm text-gray-600 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</label>
                <input [(ngModel)]="selectedTransfer.accName"
                  class="w-full outline-2 outline-green-400 rounded px-3 py-2 bg-gray-100">
              </div>
            </div>
            <!-- ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î -->
            <label class="flex items-center gap-2">
              <input type="radio" [(ngModel)]="selectedTransfer.payType" value="002">
              <span>‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</span>
            </label>
            <!-- ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ -->
            <label class="flex items-center gap-2">
              <input type="radio" [(ngModel)]="selectedTransfer.payType" value="003">
              <span>‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡πÉ‡∏´‡πâ ‡∏ò.‡∏Å.‡∏™.</span>
            </label>
          </div>
        </div>
        <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô -->
        <div class="mt-6 flex justify-end gap-4">
          <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô -->
          <button (click)="confirmReceiver()"
            class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-md shadow">
            ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô
          </button>

          <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å -->
          <button (click)="resetTransferForm()"
            class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-md shadow">
            ‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
          </button>
        </div>

      </div>
      <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å -->
      <div class="flex justify-end gap-4">
        <div *ngIf="transferList.length > 0">
          <button (click)="submitTransfer()"
            class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md shadow">
            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
          </button>
        </div>
        <button (click)="setView('search')" class="bg-red-500 hover:bg-red-600 text-white px-5 py-2 rounded-md shadow">
          ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
        </button>
      </div>

    </div>
  </div>
</div>

<div *ngIf="activeView === 'detail'" class="p-2">
  <div class="w-full bg-white rounded-xl shadow-md pb-4">
    <!-- ‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á -->
    <div class="bg-green-500 rounded-t-xl text-center py-3">
      <p class="text-xl text-white font-bold">‡πÇ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡∏∑‡∏≠ : ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</p>
    </div>

    <!-- ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
    <div class="m-4 rounded-lg bg-white shadow-md overflow-hidden border border-gray-200">
      <!-- ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ -->
      <div class="bg-blue-500 px-4 py-2">
        <h2 class="text-white text-lg font-semibold">‡∏ú‡∏π‡πâ‡πÇ‡∏≠‡∏ô</h2>
      </div>
      <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ -->
      <div class="p-4 space-y-4 text-sm text-gray-700" *ngIf="transferResult">
        <!-- ‡∏ä‡∏∑‡πà‡∏≠ -->
        <p class="text-base font-medium">
          {{ transferResult.sender?.titleCus }} {{ transferResult.sender?.cusFname }} {{ transferResult.sender?.cusLname
          }} <span class="text-gray-500 font-normal">[{{ transferResult.sender?.cusCodeg }}]</span>
        </p>
        <!-- ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏∏‡πâ‡∏ô -->
        <div class="space-y-1">
          <p>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÉ‡∏ö‡∏´‡∏∏‡πâ‡∏ô: <span class="font-semibold text-gray-800">{{ transferResult.sender?.stkNote }}</span><span
              class="text-gray-500 font-normal ml-4"></span></p>
          <p>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏∏‡πâ‡∏ô: <span class="font-semibold text-gray-800">{{ transferResult.sender?.stkNostart }} - {{
              transferResult.sender?.stkNostop }}</span>
          </p>
        </div>
        <!-- ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏´‡∏∏‡πâ‡∏ô -->
        <div class="flex flex-wrap gap-8">
          <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô: <span class="font-semibold">{{ transferResult.sender?.unit }} ‡∏´‡∏∏‡πâ‡∏ô</span></p>
          <p>‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏´‡∏∏‡πâ‡∏ô: <span class="font-semibold">{{ transferResult.sender?.value }} ‡∏ö‡∏≤‡∏ó</span></p>
        </div>
        <!-- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ö‡∏õ‡∏±‡∏ô‡∏ú‡∏• -->
        <div class="flex gap-4">
          <p>‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•‡πÇ‡∏î‡∏¢: <span class="font-semibold">{{ transferResult.sender?.payDesc }}</span></p>
          <div class="flex gap-2" *ngIf="transferResult.sender?.stkPayType == '001'">
            <p>‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: <span class="font-semibold">{{ transferResult.sender?.accname }}</span></p>
            <p>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ <span class="font-semibold">{{ transferResult.sender?.accno }}</span></p>
          </div>
        </div>
      </div>
    </div>

    <div class="m-4 rounded-lg bg-white shadow-md overflow-hidden border border-gray-200">
      <!-- ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ -->
      <div class="bg-blue-500 px-4 py-2">
        <h2 class="text-white text-lg font-semibold">‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô</h2>
      </div>
      <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ -->
      <div class="p-4 space-y-4 text-sm text-gray-700" *ngFor="let receiver of transferResult.receivers">
        <!-- ‡∏ä‡∏∑‡πà‡∏≠ -->
        <p class="text-base font-medium">
          {{ receiver.titleCus }}{{ receiver.cusFname }} {{ receiver.cusLname }} <span
            class="text-gray-500 font-normal">[ {{receiver.cusCodeg}} ]</span>
        </p>
        <!-- ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏∏‡πâ‡∏ô -->
        <div class="space-y-1">
          <p>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏∏‡πâ‡∏ô: <span class="font-semibold text-gray-800">{{ receiver.stkNote }}</span><span
              class="text-gray-500 font-normal ml-4">(‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß)</span></p>
          <p>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏∏‡πâ‡∏ô: <span class="font-semibold text-gray-800">{{ receiver.stkNostart }} - {{ receiver.stkNostop
              }}</span>
          </p>
        </div>
        <!-- ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏´‡∏∏‡πâ‡∏ô -->
        <div class="flex flex-wrap gap-8">
          <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô: <span class="font-semibold">{{ receiver.unit }} ‡∏´‡∏∏‡πâ‡∏ô</span></p>
          <p>‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏´‡∏∏‡πâ‡∏ô: <span class="font-semibold">{{ receiver.value }} ‡∏ö‡∏≤‡∏ó</span></p>
        </div>
        <!-- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ö‡∏õ‡∏±‡∏ô‡∏ú‡∏• -->
        <div class="flex gap-4">
          <p>‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•‡πÇ‡∏î‡∏¢: <span class="font-semibold">{{ receiver.payDesc }}</span></p>
          <div class="flex gap-2" *ngIf="receiver.stkPayType == '001'">
            <p>‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: <span class="font-semibold">{{ receiver.accname }}</span></p>
            <p>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ <span class="font-semibold">{{ receiver.accno }}</span></p>
          </div>
        </div>
      </div>
    </div>

    <div class="flex justify-center">
      <button (click)="goBack()"
        class="py-1.5 px-6 text-white bg-green-400 rounded-xs cursor-pointer hover:shadow-sm">‡∏Å‡∏•‡∏±‡∏ö</button>
    </div>
  </div>
</div>

<!-- ‚úÖ Loading Overlay ‡πÅ‡∏ö‡∏ö‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ + ‡∏°‡∏≠‡∏á‡∏ó‡∏∞‡∏•‡∏∏ + ‡πÄ‡∏ö‡∏•‡∏≠ -->
<div *ngIf="loading"
  class="fixed inset-0 z-50 flex items-center justify-center bg-gray-100 bg-opacity-40 backdrop-blur-sm"
  style="background-color: rgba(128, 128, 128, 0.7);">
  <div class="text-center">
    <svg class="animate-spin h-10 w-10 text-blue-600 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none"
      viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" />
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" />
    </svg>
    <p class="text-lg text-white font-medium">üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</p>
  </div>
</div>