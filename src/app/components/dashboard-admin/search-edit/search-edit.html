<div *ngIf="activeView === 'search'">
  <div class="max-w-4xl mx-auto p-6 bg-white rounded shadow">
    <h2 class="text-xl font-bold mb-4 text-center">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>

    <p class="mb-2">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>

    <form #searchForm="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4" (ngSubmit)="onSearch()">
      <div>
        <label class="block text-sm font-medium text-gray-700">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô</label>
        <input type="text" [(ngModel)]="criteria.cusId" name="cusId"
          class="w-full px-3 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ö‡∏´‡∏∏‡πâ‡∏ô</label>
        <input type="text" [(ngModel)]="criteria.stockId" name="stockId"
          class="w-full px-3 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">‡∏ä‡∏∑‡πà‡∏≠</label>
        <input type="text" [(ngModel)]="criteria.fname" name="cusFname"
          class="w-full px-3 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
        <input type="text" [(ngModel)]="criteria.lname" name="lname"
          class="w-full px-3 py-2 border border-gray-300 rounded shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" />
      </div>

      <div class="col-span-1 md:col-span-2 flex justify-end space-x-2 mt-2">
        <button type="submit"
          class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700">
          üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
        </button>
        <button type="button" (click)="onReset()"
          class="text-white bg-gray-300 hover:bg-gray-600 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-gray-500 dark:hover:bg-gray-400">
          ‚ôªÔ∏è ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
        </button>
      </div>
    </form>

    <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå -->
    <div *ngIf="results.length > 0" class="overflow-x-auto mt-4">
      <h3 class="text-md font-semibold mb-2">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏û‡∏ö: {{ results.length }} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>

      <table class="min-w-full border border-gray-300 text-sm text-gray-700">
        <thead class="bg-gray-100">
          <tr>
            <th class="border px-4 py-2 text-left">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
            <th class="border px-4 py-2 text-left">‡∏™‡∏≤‡∏Ç‡∏≤</th>
            <th class="border px-4 py-2 text-left">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô</th>
            <th class="border px-4 py-2 text-left">‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
            <th class="border px-4 py-2 text-left">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
            <th class="border px-4 py-2 text-left">‡πÉ‡∏ö‡∏´‡∏∏‡πâ‡∏ô</th>
            <th class="border px-4 py-2 text-left">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let r of results; let i = index">
            <td class="border px-4 py-1">{{ i + 1 }}</td>
            <td class="border px-4 py-1">{{ r.brCus }}</td>
            <td class="border px-4 py-1">{{ r.cusiD }}</td>
            <td class="border px-4 py-1">{{ r.fullName }}</td>
            <td class="border px-4 py-1">{{ r.statusDesc || '-' }}</td>
            <td class="border px-4 py-1">
              <!-- <ul class="list-disc list-inside">
              <li *ngFor="let stk of r.stockNotes">{{ stk }}</li>
            </ul> -->
              <button (click)="setView('stock', r.stockNotes, r.cusiD, r.fullName, r.stockList, r.statusDesc)">üìà
                ‡∏´‡∏∏‡πâ‡∏ô</button>
            </td>
            <td class="border px-4 py-1 text-center">
              <button (click)="onEdit(r)" class="text-blue-600 hover:text-blue-800">üìù</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="results.length && totalPages > 1" class="flex justify-center gap-4 mt-4">
      <button (click)="onSearch(currentPage - 1)" [disabled]="currentPage === 1"
        class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">‚¨ÖÔ∏è ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>

      <span class="font-semibold">‡∏´‡∏ô‡πâ‡∏≤ {{ currentPage }} ‡∏à‡∏≤‡∏Å {{ totalPages }}</span>

      <button (click)="onSearch(currentPage + 1)" [disabled]="currentPage === totalPages"
        class="px-3 py-1 bg-gray-300 rounded hover:bg-gray-400">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚û°Ô∏è</button>
    </div>


    <!-- ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå -->
    <div *ngIf="results.length === 0 && searched" class="text-red-500 mt-2">
      ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
    </div>

    <!-- ‚úÖ Loading Overlay ‡πÅ‡∏ö‡∏ö‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ + ‡∏°‡∏≠‡∏á‡∏ó‡∏∞‡∏•‡∏∏ + ‡πÄ‡∏ö‡∏•‡∏≠ -->
    <div *ngIf="loading"
      class="fixed inset-0 z-50 flex items-center justify-center bg-gray-100 bg-opacity-40 backdrop-blur-sm"
      style="background-color: rgba(128, 128, 128, 0.7);">
      <div class="text-center">
        <!-- üîÑ ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏´‡∏°‡∏∏‡∏ô -->
        <svg class="animate-spin h-10 w-10 text-blue-600 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none"
          viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" />
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" />
        </svg>

        <!-- üìù ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° -->
        <p class="text-lg text-white font-medium">üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</p>
      </div>
    </div>



    <!-- ‚úÖ Modal -->
    <div *ngIf="showModal" class="fixed inset-0 flex items-start justify-center bg-gray-500 z-50 pt-12"
      style="background-color: rgba(128, 128, 128, 0.7);">
      <div class="bg-white rounded-lg shadow-lg w-full max-h-9/10 p-6 overflow-y-auto shadow-x max-w-3/4">
        <!-- ‚úÖ Tabs -->
        <div class="flex mb-4 border-b border-gray-300">
          <button (click)="activeTab = 'edit'" [class.bg-blue-600]="activeTab === 'edit'"
            class="px-4 py-2 rounded-t-lg text-sm font-semibold" [class.text-white]="activeTab === 'edit'"
            [class.bg-gray-200]="activeTab !== 'edit'">
            ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
          </button>
          <button (click)="activeTab = 'dividend'" [class.bg-blue-600]="activeTab === 'dividend'"
            class="px-4 py-2 rounded-t-lg text-sm font-semibold" [class.text-white]="activeTab === 'dividend'"
            [class.bg-gray-200]="activeTab !== 'dividend'">
            üí∞ ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•
          </button>
        </div>

        <!-- Modal ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
        <div *ngIf="activeTab === 'edit'">
          <h2 class="text-xl font-bold mb-4">üõ†Ô∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>
          <p class="font-semibold">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</p>
          <ul class="mb-7">
            <li>‚ö´‡∏Å‡∏£‡∏≠‡∏ö‡∏™‡∏µ‡∏î‡∏≥‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ</li>
            <li>üîµ‡∏Å‡∏£‡∏≠‡∏ö‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô<span class="font-bold">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ</span></li>
          </ul>

          <div class="flex flex-row gap-4">
            <!-- ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ -->
            <div class="mb-4">
              <label class="block mb-1 text-sm ">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:</label>
              <select [(ngModel)]="editingItem.cusCode" name="cusType" class="border rounded px-3 py-2">
                <option *ngFor="let type of custypeList" [value]="type.cusCode">
                  {{ type.cusCode }} : {{ type.cusDesc }}
                </option>
              </select>
            </div>

            <!-- ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô -->
            <div class="mb-4 block">
              <label class="text-sm mr-2 whitespace-nowrap">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô:</label>
              <p class="text-blue-600 font-medium text-xl">
                ({{ editingItem.cusCodeg }}) {{ editingItem.custypeDesc }}
              </p>
            </div>
          </div>


          <div class="flex gap-4">
            <!-- ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô -->
            <div class="mb-4 flex-1">
              <label class="block mb-1 text-sm">‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô:</label>
              <select [(ngModel)]="editingItem.docType" name="docType"
                class="w-full border rounded px-3 py-2 transition-all duration-300 ease-in-out focus:ring focus:ring-blue-300 focus:border-blue-500 shadow-sm hover:shadow-md">
                <option *ngFor="let t of doctypeList" [value]="t.docType">
                  {{ t.docDesc }}
                </option>
              </select>
            </div>
            <!-- ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà -->
            <div class="mb-4 flex-1">
              <label class="block mb-1 text-sm">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà:</label>
              <input [(ngModel)]="editingItem.cusiD" type="text" class="w-full border px-3 py-2 rounded">
            </div>
            <!-- Ref -->
            <div class="mb-4 flex-1">
              <label class="block mb-1 text-sm">Ref:</label>
              <input [(ngModel)]="editingItem.brCus" type="text" class="w-full border px-3 py-2 rounded border-blue-600"
                disabled>
            </div>
          </div>

          <div class="flex gap-4">
            <!-- ‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤ -->
            <div class="mb-4 flex-1">
              <label class="block mb-1 text-sm">‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏∑‡πà‡∏≠:</label>
              <select [(ngModel)]="editingItem.title" name="docType" class="w-full border rounded px-3 py-2">
                <option *ngFor="let tl of titleList" [value]="tl.titleCode">
                  {{ tl.titleDesc }}
                </option>
              </select>
            </div>
            <!-- ‡∏ú‡∏π‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏†‡∏≤‡∏©‡∏µ -->
            <div class="mb-4 flex-1">
              <label class="block mb-1 text-sm">‡∏ú‡∏π‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏†‡∏≤‡∏©‡∏µ:</label>
              <input [(ngModel)]="editingItem.cusTax" type="text" class="w-full border px-3 py-2 rounded">
            </div>
            <!-- ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô -->
            <div class="mb-4 flex-1">
              <label class="block mb-1 text-sm">‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô:</label>
              <input [(ngModel)]="editingItem.stockCount" type="text"
                class="w-full border px-3 py-2 rounded border-blue-600" disabled>
            </div>
          </div>

          <!-- ‡∏ä‡∏∑‡πà‡∏≠ -->
          <div class="mb-4 flex-1">
            <label class="block mb-1 text-sm">‡∏ä‡∏∑‡πà‡∏≠:</label>
            <input [(ngModel)]="editingItem.cusFname" type="text" class="w-full border px-3 py-2 rounded">
          </div>
          <!-- ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• -->
          <div class="mb-4 flex-1">
            <label class="block mb-1 text-sm">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
            <input [(ngModel)]="editingItem.cusLname" type="text" class="w-full border px-3 py-2 rounded">
          </div>

          <!-- ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≤‡∏°‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô -->
          <div *ngIf="homeAddress" class="mt-7">
            <h2 class="text-center">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≤‡∏°‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô</h2>
            <div class="flex gap-4">
              <!-- ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà:</label>
                <input [(ngModel)]="homeAddress.houseno" type="text" class="w-full border px-3 py-2 rounded">
              </div>
              <!-- ‡∏ã‡∏≠‡∏¢ -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡∏ã‡∏≠‡∏¢:</label>
                <input [(ngModel)]="homeAddress.trogSoi" type="text" class="w-full border px-3 py-2 rounded">
              </div>
              <!-- ‡∏ñ‡∏ô‡∏ô -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡∏ñ‡∏ô‡∏ô:</label>
                <input [(ngModel)]="homeAddress.road" type="text" class="w-full border px-3 py-2 rounded">
              </div>
            </div>

            <div class="flex gap-4">
              <!-- ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</label>
                <select [(ngModel)]="homeAddress.prvCode" (change)="loadHomeAumphor(homeAddress.prvCode)" name="docType"
                  class="w-full border rounded px-3 py-2">
                  <option *ngFor="let pv of provinceList" [value]="pv.prvCode">
                    {{ pv.prvName }}
                  </option>
                </select>
              </div>
              <!-- ‡πÄ‡∏Ç‡∏ï/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡πÄ‡∏Ç‡∏ï/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠:</label>
                <select [(ngModel)]="homeAddress.ampCode" name="docType"
                  (change)="loadHomeTumbon(homeAddress.prvCode, homeAddress.ampCode)"
                  class="w-full border rounded px-3 py-2">
                  <option *ngFor="let amp of homeAumphors" [value]="amp.ampCode">
                    {{ amp.ampName }}
                  </option>
                </select>
              </div>
              <!-- ‡πÅ‡∏Ç‡∏ß‡∏á/‡∏ï‡∏≥‡∏ö‡∏• (homeAddress) -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡πÅ‡∏Ç‡∏ß‡∏á/‡∏ï‡∏≥‡∏ö‡∏•:</label>
                <select [(ngModel)]="homeAddress.tmbCode" (change)="updateHomeZipcode()" name="homeTmbCode"
                  class="w-full border rounded px-3 py-2">
                  <option *ngFor="let tmb of homeTumbons" [value]="tmb.tmbCode">
                    {{ tmb.tmbName }}
                  </option>
                </select>
              </div>

            </div>

            <div class="flex gap-4">
              <!-- ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå   -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå:</label>
                <input [(ngModel)]="homeAddress.zipcode" type="text"
                  class="w-full border px-3 py-2 rounded border-blue-600" disabled>
              </div>
              <!-- ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠  -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠:</label>
                <input [(ngModel)]="homeAddress.phone" type="text" class="w-full border px-3 py-2 rounded">
              </div>
            </div>
          </div>

          <!-- ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô -->
          <div *ngIf="currentAddress" class="mt-7">
            <h2 class="text-center">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h2>
            <div class="flex gap-4">
              <!-- ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà:</label>
                <input [(ngModel)]="currentAddress.houseno" type="text" class="w-full border px-3 py-2 rounded">
              </div>
              <!-- ‡∏ã‡∏≠‡∏¢ -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡∏ã‡∏≠‡∏¢:</label>
                <input [(ngModel)]="currentAddress.trogSoi" type="text" class="w-full border px-3 py-2 rounded">
              </div>
              <!-- ‡∏ñ‡∏ô‡∏ô -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡∏ñ‡∏ô‡∏ô:</label>
                <input [(ngModel)]="currentAddress.road" type="text" class="w-full border px-3 py-2 rounded">
              </div>
            </div>

            <div class="flex gap-4">
              <!-- ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</label>
                <select [(ngModel)]="currentAddress.prvCode" (change)="loadCurrentAumphor(currentAddress.prvCode)"
                  name="docType" class="w-full border rounded px-3 py-2">
                  <option *ngFor="let pv of provinceList" [value]="pv.prvCode">
                    {{ pv.prvName }}
                  </option>
                </select>
              </div>
              <!-- ‡πÄ‡∏Ç‡∏ï/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡πÄ‡∏Ç‡∏ï/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠:</label>
                <select [(ngModel)]="currentAddress.ampCode" name="docType"
                  (change)="loadCurrentTumbon(currentAddress.prvCode, currentAddress.ampCode)"
                  class="w-full border rounded px-3 py-2">
                  <option *ngFor="let amp of currentAumphors" [value]="amp.ampCode">
                    {{ amp.ampName }}
                  </option>
                </select>
              </div>
              <!-- ‡πÅ‡∏Ç‡∏ß‡∏á/‡∏ï‡∏≥‡∏ö‡∏•  -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡πÅ‡∏Ç‡∏ß‡∏á/‡∏ï‡∏≥‡∏ö‡∏•:</label>
                <select [(ngModel)]="currentAddress.tmbCode" (change)="updateCurrentZipcode()" name="currentTmbCode"
                  class="w-full border rounded px-3 py-2">
                  <option *ngFor="let tmb of currentTumbons" [value]="tmb.tmbCode">
                    {{ tmb.tmbName }}
                  </option>
                </select>
              </div>

            </div>

            <div class="flex gap-4">
              <!-- ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå   -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå:</label>
                <input [(ngModel)]="currentAddress.zipcode" type="text"
                  class="w-full border px-3 py-2 rounded border-blue-600" disabled>
              </div>
              <!-- ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠  -->
              <div class="mb-4 flex-1">
                <label class="block mb-1 text-sm">‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠:</label>
                <input [(ngModel)]="currentAddress.phone" type="text" class="w-full border px-3 py-2 rounded">
              </div>
            </div>
          </div>

          <div class="mb-4 flex-1">
            <label class="block mb-1 text-sm">‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</label>
            <input [(ngModel)]="currentAddress.addr1" type="text"
              class="w-full text-gray-400 border px-3 py-2 rounded border-blue-600" disabled>
          </div>
          <div class="mb-4 flex-1">
            <label class="block mb-1 text-sm">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà 2:</label>
            <input [(ngModel)]="currentAddress.addr2" type="text"
              class="w-full text-gray-400 border px-3 py-2 rounded border-blue-600" disabled>
          </div>




          <div class="flex justify-end space-x-2">
            <button (click)="onCloseModal()" class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500">‚ùå
              ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            <button (click)="onSaveEdit()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">üíæ
              ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          </div>
        </div>

        <!-- Modal ‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏• -->
        <div *ngIf="activeTab === 'dividend'">
          <h2 class="text-xl font-bold mb-4">üí∞ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•</h2>

          <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô -->
          <div class="mb-6">
            <p class="text-sm font-medium text-gray-700">‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•‡πÇ‡∏î‡∏¢ :</p>
            <p class="text-base text-gray-900">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å ‡∏ò.‡∏Å.‡∏™. ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà {{ accNo }} ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ {{ accName }}</p>
          </div>

          <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏• -->
          <form (ngSubmit)="onSaveEdit()">
            <fieldset class="border border-gray-300 p-4 rounded mb-6">
              <legend class="text-md font-semibold text-gray-700 mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•</legend>

              <div class="space-y-4">
                <!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ -->
                <div class="flex items-start gap-3">
                  <input type="radio" name="dividendMethod" value="account" [(ngModel)]="selectedMethod" class="mt-1" />
                  <div class="flex-1 space-y-2">
                    <label class="font-medium text-gray-700">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å ‡∏ò.‡∏Å.‡∏™. :</label>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" *ngIf="selectedMethod === 'account'">
                      <div>
                        <label class="block text-sm text-gray-600 mb-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å:</label>
                        <select class="w-full border rounded px-3 py-2" [(ngModel)]="selectedAccType" name="accType">
                          <!-- <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ç‡∏ä‡∏µ --</option> -->
                          <option *ngFor="let type of accTypeList" [value]="type.accType" disabled>
                            {{ type.accDesc }}
                          </option>
                        </select>
                      </div>

                      <div>
                        <label class="block text-sm text-gray-600 mb-1">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</label>
                        <input type="text" [(ngModel)]="accNo" name="accNo" class="w-full border rounded px-3 py-2" />
                      </div>

                      <div class="md:col-span-2">
                        <label class="block text-sm text-gray-600 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</label>
                        <input type="text" [(ngModel)]="accName" name="accName"
                          class="w-full border rounded px-3 py-2" />
                      </div>
                    </div>
                  </div>
                </div>

                <!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î -->
                <div class="flex items-center gap-2">
                  <input type="radio" value="cash" name="dividendMethod" [(ngModel)]="selectedMethod" />
                  <label class="text-gray-700 font-medium">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î (‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà ‡∏ò.‡∏Å.‡∏™.)</label>
                </div>

                <!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ -->
                <div class="flex items-center gap-2">
                  <input type="radio" value="donate" name="dividendMethod" [(ngModel)]="selectedMethod" />
                  <label class="text-gray-700 font-medium">‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡πÉ‡∏´‡πâ ‡∏ò.‡∏Å.‡∏™.</label>
                </div>
              </div>
            </fieldset>

            <!-- ‡∏õ‡∏∏‡πà‡∏° -->
            <div class="flex justify-end space-x-3">
              <button type="button" class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500"
                (click)="activeTab = 'edit'">
                ‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö
              </button>
              <button (click)="onSaveEdit()" type="submit"
                class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏∏‡πâ‡∏ô -->
<div *ngIf="activeView === 'stock'">
  <button (click)="setView('search')"
    class="inline-flex items-center px-4 py-2 mb-4 bg-white hover:bg-gray-300 text-gray-800 text-sm font-medium rounded-lg shadow-md transition">
    üîô ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
  </button>
  <app-stocks [cusId]="selectedCusId" [fullName]="selectedName" [stNotesList]="selectedStockNotes"
    [statusDesc]="selectedStatus">
  </app-stocks>
</div>