<div *ngIf="activeView == 'search'">
  <app-search-edit [InputtransferShare]="internalViewName" (viewStock)="onViewStock($event)"
    (transferStock)="onTransferStockSelected($event)"></app-search-edit>
</div>

<div *ngIf="activeView === 'transfer'" class="p-4">
  <div class="w-full bg-white rounded-xl shadow-md">
    <!-- ‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á -->
    <div class="bg-green-500 rounded-t-xl text-center py-3">
      <p class="text-xl text-white font-bold">‡πÇ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡∏∑‡∏≠</p>
    </div>

    <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ -->
    <div class="flex flex-col w-full p-6 gap-6">

      <!-- ‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 1 -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-gray-700 font-medium">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô:</label>
          <p class="text-gray-800 mt-1">{{ selectedStock?.stkOwniD }}</p>
        </div>
        <div>
          <label class="block text-gray-700 font-medium">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ö‡∏´‡∏∏‡πâ‡∏ô:</label>
          <p class="text-gray-800 mt-1">{{ selectedStock?.stkNote }}</p>
        </div>
        <div>
          <label class="block text-gray-700 font-medium">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏∏‡πâ‡∏ô:</label>
          <p class="text-gray-800 mt-1">{{ selectedStock?.stkNostart }} - {{ selectedStock?.stkNostop }}</p>
        </div>
      </div>

      <!-- ‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 2 -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-gray-700 font-medium">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
          <p class="text-gray-800 mt-1">{{ selectedStock?.fullname }}</p>
        </div>
        <div>
          <label class="block text-gray-700 font-medium">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</label>
          <p class="text-gray-800 mt-1">{{ selectedStock?.statusDesc }}</p>
        </div>
        <div>
          <label class="block text-gray-700 font-medium">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô:</label>
          <p class="text-gray-800 mt-1">{{ selectedStock?.stkUniT }} ‡∏´‡∏∏‡πâ‡∏ô / {{ selectedStock?.stkValue }} ‡∏ö‡∏≤‡∏ó</p>
        </div>
      </div>

      <!-- ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡∏∑‡∏≠ -->
      <div class="text-center text-gray-600 text-lg font-medium flex justify-center items-center gap-2">
        <span>‡∏ú‡∏π‡πâ‡πÇ‡∏≠‡∏ô ‚¨ÜÔ∏è</span>
        <span class="text-xl">‚áÑ</span>
        <span>‚¨áÔ∏è ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô</span>
      </div>

      <!-- ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• -->
      <div *ngIf="selectedTransfer">
        <label class="block text-gray-700 font-medium mb-1">‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡∏´‡∏∏‡πâ‡∏ô:</label>
        <select [(ngModel)]="selectedTransfer.remCode" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• --</option>
          <option *ngFor="let rem of remcodeList" [value]="rem.remCode">
            {{ rem.remDesc }}
          </option>
        </select>
      </div>


      <!-- ‚úÖ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß -->
      <div *ngIf="transferList.length > 0" class="border border-gray-300 bg-gray-50 rounded p-4 mb-4">
        <p class="font-semibold mb-2 text-gray-800">üìù ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß:</p>

        <ul class="space-y-2 text-sm text-gray-700">
          <li *ngFor="let person of transferList; index as i" class="flex justify-between items-center">
            <div>
              {{ i + 1 }}. {{ person.fullName || '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏ä‡∏∑‡πà‡∏≠' }} | {{ person.cid }} | {{ person.shareAmount }} ‡∏´‡∏∏‡πâ‡∏ô
            </div>
            <button (click)="removeTransfer(i)" class="text-red-600 hover:text-red-800 text-xs underline">‡∏•‡∏ö</button>
          </li>
        </ul>
      </div>


      <!-- ‡∏õ‡πâ‡∏≠‡∏ô‡∏ö‡∏±‡∏ï‡∏£ -->
      <!-- ‚úÖ ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏≠‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö -->
      <div *ngIf="isEnteringNewPerson" class="mt-4 border rounded p-4 bg-gray-50">
        <label class="block mb-1 text-sm font-medium">‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô):</label>
        <div class="flex items-center gap-2">
          <input [(ngModel)]="tempCID" class="flex-1 border rounded px-3 py-2" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£">
          <button (click)="fetchReceiverInfo()" class="text-green-600 text-2xl hover:text-green-800">‚ûï</button>
        </div>
      </div>


      <div *ngIf="selectedTransfer" class="mt-6 p-6 bg-white rounded-xl shadow-lg ring-1 ring-gray-200">
        <!-- ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ -->
        <div class="text-center mb-4 text-lg font-semibold text-gray-800">
          üë§ ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô
        </div>

        <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div>
            <label class="block text-sm text-gray-700">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏ô:</label>
            <input [(ngModel)]="selectedTransfer.cid" type="text"
              class="w-full border border-gray-300 bg-gray-100 rounded px-3 py-2" readonly>
          </div>
          <div>
            <label class="block text-sm text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô:</label>
            <input [(ngModel)]="selectedTransfer.shareAmount" type="number" min="0"
              class="w-full border border-gray-300 rounded px-3 py-2">
          </div>
          <div class="md:col-span-2">
            <label class="block text-sm text-gray-700">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
            <p class="text-gray-800">{{ selectedTransfer.fullName }}</p>
          </div>
        </div>

        <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏• -->
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
          <label class="block text-gray-700 font-medium mb-2">üí∞ ‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•:</label>
          <div class="flex flex-col gap-3">
            <!-- ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å -->
            <label class="flex items-center gap-2">
              <input type="radio" [(ngModel)]="selectedTransfer.payType" value="001">
              <span>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å</span>
            </label>

            <div *ngIf="selectedTransfer.payType === '001'" class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm text-gray-600 mb-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</label>
                <select [(ngModel)]="selectedTransfer.accType"
                  class="w-full border rounded px-3 py-2 bg-gray-100 text-gray-500" disabled>
                  <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ç‡∏ä‡∏µ --</option>
                  <option *ngFor="let a of accTypes" [value]="a.accType">{{ a.accDesc }}</option>
                </select>
              </div>
              <div>
                <label class="block text-sm text-gray-600 mb-1">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</label>
                <input [(ngModel)]="selectedTransfer.accNo" class="w-full border rounded px-3 py-2 bg-gray-100"
                  readonly>
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm text-gray-600 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</label>
                <input [(ngModel)]="selectedTransfer.accName" class="w-full border rounded px-3 py-2 bg-gray-100"
                  readonly>
              </div>
            </div>

            <!-- ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î -->
            <label class="flex items-center gap-2">
              <input type="radio" [(ngModel)]="selectedTransfer.payType" value="002">
              <span>‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</span>
            </label>

            <!-- ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ -->
            <label class="flex items-center gap-2">
              <input type="radio" [(ngModel)]="selectedTransfer.payType" value="003">
              <span>‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡πÉ‡∏´‡πâ ‡∏ò.‡∏Å.‡∏™.</span>
            </label>
          </div>
        </div>

        <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô -->
        <div class="mt-6 flex justify-end gap-4">
          <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô -->
          <button (click)="confirmReceiver()"
            class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-md shadow">
            ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô
          </button>

          <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å -->
          <button (click)="resetTransferForm()"
            class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-md shadow">
            ‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
          </button>
        </div>

      </div>


      <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å -->
      <div class="flex justify-end gap-4">
        <div *ngIf="transferList.length > 0">
          <button (click)="submitTransfer()"
            class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md shadow">
            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
          </button>
        </div>
        <button (click)="setView('search')" class="bg-red-500 hover:bg-red-600 text-white px-5 py-2 rounded-md shadow">
          ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
        </button>
      </div>

    </div>
  </div>
</div>