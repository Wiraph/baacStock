import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import Swal from 'sweetalert2';

interface Document {
  id: string;
  fileName: string;
  category: string;
  uploadDate: Date;
  fileSize: number;
  downloadUrl: string;
  description?: string;
}

@Component({
  selector: 'app-forms-procedures',
  standalone: true,
  imports: [CommonModule],
  templateUrl: './forms-procedures.component.html'
})
export class FormsProceduresComponent implements OnInit {

  documents: Document[] = [];
  loading = false;

  constructor() { }

  ngOnInit(): void {
    this.loadDocuments();
  }

  // Load Documents (Mock Data)
  private loadDocuments() {
    this.loading = true;
    
    // Load data immediately without delay
    this.documents = [
      {
        id: '213.01',
        fileName: '213.01 ‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£.pdf',
        category: '‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå',
        uploadDate: new Date(2024, 11, 20),
        fileSize: 1024000, // 1MB
        downloadUrl: '/documents/forms/213.01-‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£.pdf',
        description: '‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£'
      },
      {
        id: '213.01-manual',
        fileName: '213.01‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£.doc',
        category: '‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥',
        uploadDate: new Date(2024, 11, 19),
        fileSize: 512000, // 512KB
        downloadUrl: '/documents/procedures/213.01-‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£.doc',
        description: '‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£'
      },
      {
        id: '213.02',
        fileName: '213.02 ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô.pdf',
        category: '‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå',
        uploadDate: new Date(2024, 11, 18),
        fileSize: 768000, // 768KB
        downloadUrl: '/documents/forms/213.02-‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô.pdf',
        description: '‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô'
      },
      {
        id: '213.02-manual',
        fileName: '213.02‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô.doc',
        category: '‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥',
        uploadDate: new Date(2024, 11, 17),
        fileSize: 640000, // 640KB
        downloadUrl: '/documents/procedures/213.02-‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô.doc',
        description: '‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô'
      },
      {
        id: '213.03',
        fileName: '213.03 ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠.pdf',
        category: '‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå',
        uploadDate: new Date(2024, 11, 16),
        fileSize: 896000, // 896KB
        downloadUrl: '/documents/forms/213.03-‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠.pdf',
        description: '‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠'
      },
      {
        id: '213.03-manual',
        fileName: '213.03‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠ (‡∏Å‡∏£‡∏ì‡∏µ‡πÇ‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏≠‡∏∑‡πà‡∏ô, ‡∏ú‡∏π‡πâ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï).doc',
        category: '‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥',
        uploadDate: new Date(2024, 11, 15),
        fileSize: 1152000, // 1.1MB
        downloadUrl: '/documents/procedures/213.03-‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠.doc',
        description: '‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠ (‡∏Å‡∏£‡∏ì‡∏µ‡πÇ‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏≠‡∏∑‡πà‡∏ô, ‡∏ú‡∏π‡πâ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï)'
      },
      {
        id: '213.04',
        fileName: '213.04 ‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏•‡∏î‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ö‡∏¥‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡∏ô‡∏´‡∏ô‡∏≠‡∏ö‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏¥‡∏° (‡∏Å‡∏£‡∏ì‡∏µ‡∏ä‡∏≥‡∏£‡∏∏‡∏î, ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢).pdf',
        category: '‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå',
        uploadDate: new Date(2024, 11, 14),
        fileSize: 1280000, // 1.25MB
        downloadUrl: '/documents/forms/213.04-‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏•‡∏î‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ö‡∏¥‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà.pdf',
        description: '‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏•‡∏î‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ö‡∏¥‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡∏ô‡∏´‡∏ô‡∏≠‡∏ö‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏¥‡∏°'
      },
      {
        id: '213.04-manual',
        fileName: '213.04‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ö‡∏¥‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡∏ô‡∏´‡∏ô‡∏≠‡∏ö‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏¥‡∏° (‡∏Å‡∏£‡∏ì‡∏µ‡∏ä‡∏≥‡∏£‡∏∏‡∏î, ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢).doc',
        category: '‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥',
        uploadDate: new Date(2024, 11, 13),
        fileSize: 1024000, // 1MB
        downloadUrl: '/documents/procedures/213.04-‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ö‡∏¥‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà.doc',
        description: '‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ö‡∏¥‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡∏ô‡∏´‡∏ô‡∏≠‡∏ö‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏¥‡∏°'
      },
      {
        id: '213.05',
        fileName: '213.05‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏∑‡∏ô‡∏Ç‡∏¢‡∏≠‡∏Å‡∏≤‡∏£‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å.doc',
        category: '‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥',
        uploadDate: new Date(2024, 11, 12),
        fileSize: 768000, // 768KB
        downloadUrl: '/documents/procedures/213.05-‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏∑‡∏ô‡∏Ç‡∏¢‡∏≠‡∏Å‡∏≤‡∏£‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£.doc',
        description: '‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏∑‡∏ô‡∏Ç‡∏¢‡∏≠‡∏Å‡∏≤‡∏£‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å'
      },
      {
        id: '213.06',
        fileName: '213.06 ‡∏Å‡∏≤‡∏£‡∏Ç‡∏∑‡∏ô‡∏Ç‡∏¢‡∏≠‡∏Å‡∏≤‡∏£‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤.pdf',
        category: '‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå',
        uploadDate: new Date(2024, 11, 11),
        fileSize: 896000, // 896KB
        downloadUrl: '/documents/forms/213.06-‡∏Å‡∏≤‡∏£‡∏Ç‡∏∑‡∏ô‡∏Ç‡∏¢‡∏≠‡∏Å‡∏≤‡∏£‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤.pdf',
        description: '‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏∑‡∏ô‡∏Ç‡∏¢‡∏≠‡∏Å‡∏≤‡∏£‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤'
      },
      {
        id: '213.06-manual',
        fileName: '213.06‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏∑‡∏ô‡∏Ç‡∏¢‡∏≠‡∏Å‡∏≤‡∏£‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤.doc',
        category: '‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥',
        uploadDate: new Date(2024, 11, 10),
        fileSize: 640000, // 640KB
        downloadUrl: '/documents/procedures/213.06-‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏∑‡∏ô‡∏Ç‡∏¢‡∏≠‡∏Å‡∏≤‡∏£‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£.doc',
        description: '‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏∑‡∏ô‡∏Ç‡∏¢‡∏≠‡∏Å‡∏≤‡∏£‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤'
      }
    ];
    
    this.loading = false;
  }

  // Download Document
  downloadDocument(document: Document): void {
    console.log('Downloading document:', document.fileName);
    // TODO: Implement actual download logic
    alert(`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î: ${document.fileName}`);
  }

  // Get File Icon
  getFileIcon(fileName: string): string {
    const extension = fileName.split('.').pop()?.toLowerCase();
    switch (extension) {
      case 'pdf': return 'üìÑ';
      case 'doc':
      case 'docx': return 'üìù';
      case 'txt': return 'üìÑ';
      default: return 'üìÑ';
    }
  }

  // Format File Size
  formatFileSize(bytes: number): string {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
  }

  // Get Category Badge Style
  getCategoryBadge(category: string): { class: string, text: string } {
    switch (category) {
      case '‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå':
        return {
          class: 'bg-blue-100 text-blue-800',
          text: 'üìã ‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå'
        };
      case '‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥':
        return {
          class: 'bg-green-100 text-green-800',
          text: 'üìñ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥'
        };
      default:
        return {
          class: 'bg-gray-100 text-gray-800',
          text: 'üìÑ ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£'
        };
    }
  }
}